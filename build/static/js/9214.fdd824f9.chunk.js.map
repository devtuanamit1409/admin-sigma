{"version":3,"file":"static/js/9214.fdd824f9.chunk.js","mappings":"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","sources":["app/views/dashboard/news/edit.js"],"sourcesContent":["import { PhotoCamera } from \"@mui/icons-material\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Grid,\r\n  IconButton,\r\n  TextField,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { Editor } from \"@tinymce/tinymce-react\";\r\nimport axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst AddEditPost = () => {\r\n  const style = { p: 4 };\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [author, setAuthor] = useState(\"\");\r\n  const [describe, setDescribe] = useState(\"\");\r\n  const [content, setContent] = useState(\"\");\r\n  const [imageFile, setImageFile] = useState(null);\r\n  const { id } = useParams();\r\n\r\n  useEffect(() => {\r\n    const fetchNewsDetail = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `https://demo-sigma.site/api/news/${id}`\r\n        );\r\n        const news = response.data;\r\n        console.log(news);\r\n        setTitle(news.title);\r\n        setAuthor(news.author);\r\n        setDescribe(news.describe);\r\n        setContent(news.content);\r\n        // Kiểm tra và cập nhật đường dẫn ảnh nếu có\r\n        if (news.image) {\r\n          setImagePreview(\r\n            `https://demo-sigma.site/${news.image.replace(/\\\\/g, \"/\")}`\r\n          ); // Chuyển đổi đường dẫn và thay thế ký tự \\\\\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching news details:\", error);\r\n      }\r\n    };\r\n    fetchNewsDetail();\r\n  }, [id]);\r\n  console.log(imagePreview);\r\n\r\n  const handleImageChange = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      setImageFile(file);\r\n      // Tạo URL tạm thời để hiển thị ảnh\r\n      const imagePreviewUrl = URL.createObjectURL(file);\r\n      setImagePreview(imagePreviewUrl);\r\n    }\r\n  };\r\n\r\n  const handleSavePost = async () => {\r\n    const formData = new FormData();\r\n    formData.append(\"title\", title);\r\n    formData.append(\"author\", author);\r\n    formData.append(\"describe\", describe);\r\n    formData.append(\"content\", content);\r\n    if (imageFile) {\r\n      formData.append(\"image\", imageFile);\r\n    }\r\n\r\n    try {\r\n      await axios.put(`https://demo-sigma.site/api/news/${id}`, formData);\r\n      alert(\"Bài viết đã được cập nhật thành công!\");\r\n      window.location.reload();\r\n    } catch (error) {\r\n      console.error(\"Error updating news: \", error);\r\n      alert(\"Có lỗi xảy ra khi cập nhật bài viết.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box sx={style}>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"Tiêu đề\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            name=\"title\"\r\n            required\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            value={author}\r\n            onChange={(e) => setAuthor(e.target.value)}\r\n            label=\"Tác giả\"\r\n            name=\"author\"\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item xs={12}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"Mô tả\"\r\n            value={describe}\r\n            onChange={(e) => setDescribe(e.target.value)}\r\n            name=\"describe\"\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item xs={12} sm={2}>\r\n          <label htmlFor=\"icon-button-file\">\r\n            Ảnh đại diện:\r\n            <input\r\n              className=\"input-upload-image\"\r\n              accept=\"image/*\"\r\n              id=\"icon-button-file\"\r\n              type=\"file\"\r\n              name=\"image\"\r\n              onChange={handleImageChange}\r\n            />\r\n            <IconButton\r\n              color=\"primary\"\r\n              aria-label=\"upload picture\"\r\n              component=\"span\"\r\n            >\r\n              <PhotoCamera />\r\n            </IconButton>\r\n          </label>\r\n        </Grid>\r\n\r\n        {imagePreview && (\r\n          <Grid item xs={12} sm={4}>\r\n            <img\r\n              src={imagePreview}\r\n              alt=\"Preview\"\r\n              style={{ width: \"100%\", height: \"auto\" }}\r\n            />\r\n          </Grid>\r\n        )}\r\n\r\n        <Grid item xs={12}>\r\n          <Typography variant=\"h6\">Nội dung bài viết</Typography>\r\n          <Editor\r\n            value={content}\r\n            onEditorChange={(newContent) => setContent(newContent)}\r\n            name=\"description\"\r\n            apiKey=\"5uqva5k7lt0qxlfbezptki5oskz2grzrz3kbiwvsw0kr3vhu\"\r\n            init={{\r\n              plugins:\r\n                \"anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount linkchecker\",\r\n              toolbar:\r\n                \"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat\",\r\n            }}\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item xs={12}>\r\n          <Button variant=\"contained\" color=\"primary\" onClick={handleSavePost}>\r\n            Lưu bài viết\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default AddEditPost;\r\n"],"names":["AddEditPost","imagePreview","setImagePreview","useState","title","setTitle","author","setAuthor","describe","setDescribe","content","setContent","imageFile","setImageFile","id","useParams","useEffect","async","news","axios","get","concat","data","console","log","image","replace","error","fetchNewsDetail","_jsx","Box","sx","p","children","_jsxs","Grid","container","spacing","item","xs","sm","TextField","fullWidth","label","value","onChange","e","target","name","required","htmlFor","className","accept","type","event","file","files","imagePreviewUrl","URL","createObjectURL","IconButton","color","component","PhotoCamera","src","alt","style","width","height","Typography","variant","Editor","onEditorChange","newContent","apiKey","init","plugins","toolbar","Button","onClick","formData","FormData","append","put","alert","window","location","reload"],"sourceRoot":""}